(function(p,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("vue-router")):typeof define=="function"&&define.amd?define(["exports","vue","vue-router"],e):(p=typeof globalThis<"u"?globalThis:p||self,e(p["mst-auto-page"]={},p.Vue,p.vueRouter))})(this,function(p,e,C){"use strict";const H=["href","title"],b=["src"],S=["title"],h={__name:"ColonTable",props:{filedData:Object,rowData:Object},setup(t){const a=t,o=(s,i)=>i===1?Object.prototype.toString.call(s)==="[object Object]":i===2?Object.prototype.toString.call(s)==="[object Array]":i===3?Object.prototype.toString.call(s)==="[object String]":i===4?Object.prototype.toString.call(s)==="[object Number]":i===5?Object.prototype.toString.call(s)==="[object Null]":!1,c=(s,i)=>o(s,1)?Object.prototype.hasOwnProperty.call(s,i):!1,m=()=>{typeof a.filedData.callback=="function"&&a.filedData.callback(a.rowData,a.filedData)},f=()=>a.filedData.caseColon?a.filedData.caseColon(a.rowData,a.filedData):!0,g=()=>c(a.filedData,"link")?typeof a.filedData.link=="function"?a.filedData.link(a.rowData):a.rowData[a.filedData.link]?a.rowData[a.filedData.link]:a.filedData.link:"",l=()=>c(a.filedData,"style")?typeof a.filedData.style=="function"?a.filedData.style(a.rowData):a.rowData[a.filedData.style]?a.rowData[a.filedData.style]:a.filedData.style:"",r=()=>c(a.filedData,"title")?typeof a.filedData.title=="function"?a.filedData.title(a.rowData):a.rowData[a.filedData.title]?a.rowData[a.filedData.title]:a.filedData.title:"",n=()=>c(a.filedData,"name")?typeof a.filedData.name=="function"?a.filedData.name(a.rowData):a.rowData[a.filedData.name]?a.rowData[a.filedData.name]:a.filedData.name:"",d=()=>c(a.filedData,"class")?typeof a.filedData.class=="function"?a.filedData.class(a.rowData):a.filedData.class:"",D=()=>typeof a.filedData.comp.data=="function"?a.filedData.comp.data(a.rowData):a.filedData.comp.data;return(s,i)=>{const y=e.resolveComponent("router-link");return f()?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[t.filedData.type==="link"?(e.openBlock(),e.createElementBlock("a",{key:0,onClick:i[0]||(i[0]=k=>m()),class:e.normalizeClass(d()),href:g(),title:r(),style:e.normalizeStyle(l())},[t.filedData.name?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[t.filedData.html?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.filedData.tag?t.filedData.tag:"span"),{key:0,innerHTML:n()},null,8,["innerHTML"])):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(n()),1)],64))],64)):e.createCommentVNode("",!0),e.renderSlot(s.$slots,"default")],14,H)):t.filedData.type==="img"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("img",{class:e.normalizeClass(d()),src:n(),onClick:i[1]||(i[1]=k=>m())},null,10,b),e.renderSlot(s.$slots,"default")],64)):t.filedData.type==="checkbox"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.withDirectives(e.createElementVNode("input",{onClick:i[2]||(i[2]=k=>m()),"onUpdate:modelValue":i[3]||(i[3]=k=>t.rowData.select=k),type:"checkbox",class:e.normalizeClass(d()),title:r(),style:e.normalizeStyle(l())},null,14,S),[[e.vModelCheckbox,t.rowData.select]]),e.renderSlot(s.$slots,"default")],64)):t.filedData.type==="router-link"?(e.openBlock(),e.createBlock(y,{key:3,class:e.normalizeClass(d()),to:g(),onClick:i[4]||(i[4]=k=>m()),title:r(),style:e.normalizeStyle(l())},{default:e.withCtx(()=>[t.filedData.name?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[t.filedData.html?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.filedData.tag?t.filedData.tag:"span"),{key:0,innerHTML:n()},null,8,["innerHTML"])):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(n()),1)],64))],64)):e.createCommentVNode("",!0),e.renderSlot(s.$slots,"default")]),_:3},8,["class","to","title","style"])):t.filedData.type==="comp"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:4},[t.filedData.comp?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.filedData.tag?t.filedData.tag:"div"),{key:0,class:e.normalizeClass(d())},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.filedData.comp.name),{compData:D()},null,8,["compData"])),e.renderSlot(s.$slots,"default")]),_:3},8,["class"])):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.filedData.tag?t.filedData.tag:"div"),{key:5,onClick:i[5]||(i[5]=k=>m()),class:e.normalizeClass(d()),title:r(),style:e.normalizeStyle(l())},{default:e.withCtx(()=>[t.filedData.list&&t.filedData.body?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(t.filedData.list,k=>(e.openBlock(),e.createBlock(h,{key:k.name,filedData:k,rowData:t.rowData},null,8,["filedData","rowData"]))),128)):e.createCommentVNode("",!0),t.filedData.name?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[t.filedData.html?(e.openBlock(),e.createBlock(e.resolveDynamicComponent("span"),{key:0,innerHTML:n()},null,8,["innerHTML"])):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(n()),1)],64))],64)):e.createCommentVNode("",!0),e.renderSlot(s.$slots,"default")]),_:3},8,["class","title","style"]))],64)):e.createCommentVNode("",!0)}}},w=["placeholder"],u={__name:"AutoSearch",props:{autoSearch:Object,runSearch:Function,preHandler:Object},setup(t){return(a,o)=>e.withDirectives((e.openBlock(),e.createElementBlock("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=c=>t.preHandler.autoSearch.value=c),onInput:o[1]||(o[1]=c=>t.runSearch()),class:e.normalizeClass(t.autoSearch.class),placeholder:t.autoSearch.placeholder?t.autoSearch.placeholder:"Search"},null,42,w)),[[e.vModelText,t.preHandler.autoSearch.value]])}},E={class:"col-12"},j={class:"pagination float-left"},N={key:1,class:"page-link",href:"javascript:;"},O=["onClick"],$={key:1,class:"page-link",href:"javascript:;"},x={__name:"Pagination",props:{preHandler:Object},setup(t){const a=t,o=C.useRoute(),c=C.useRouter(),m=(r,n,d)=>{if(r<=d)return[];var D,s=Math.ceil(r/d),i=Math.min(10,s);if(n>s)n=s,D=s-i;else{var y=Math.ceil(i/2);D=n+y>s?s+1-i:y+1>n?1:n-y}D=Math.max(1,D);var k=Array.apply(null,new Array(i)).map(function(R,I){return D+I++});return k.indexOf(1)===-1&&(k.shift(),k.unshift(1)),k.indexOf(s)===-1&&k.push(s),k},f=async r=>{if(a.preHandler.dynamic){if(typeof a.preHandler.tableCahngePage=="function"){let n=JSON.parse(JSON.stringify(o.query));n.page=r,await c.push({name:o.name,query:n}),o.query.page=r,a.preHandler.pagination.page=r,a.preHandler.tableCahngePage(r,o.query)}}else a.preHandler.pagination.page=r,a.preHandler.tableCahngePage(r,o.query)},g=e.computed(()=>m(a.preHandler.pagination.total,a.preHandler.pagination.page,a.preHandler.pagination.pageSize)),l=e.computed(()=>Math.ceil(a.preHandler.pagination.total/a.preHandler.pagination.pageSize));return(r,n)=>e.unref(l)>0?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["row mt-2",{disabledbutton:a.preHandler.loader}])},[e.createElementVNode("div",E,[e.createElementVNode("ul",j,[e.createElementVNode("li",{class:e.normalizeClass(["page-item",{disabled:t.preHandler.pagination.page==1}])},[t.preHandler.pagination.page>1?(e.openBlock(),e.createElementBlock("a",{key:0,class:"page-link",href:"javascript:;",onClick:n[0]||(n[0]=d=>f(parseInt(t.preHandler.pagination.page)-1))},"prev")):(e.openBlock(),e.createElementBlock("a",N,"Prev"))],2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(g),d=>(e.openBlock(),e.createElementBlock("li",{class:e.normalizeClass(["page-item",{active:t.preHandler.pagination.page==d}]),key:d},[e.createElementVNode("a",{class:"page-link",href:"javascript:;",onClick:D=>f(d)},e.toDisplayString(d),9,O)],2))),128)),e.unref(l)>0?(e.openBlock(),e.createElementBlock("li",{key:0,class:e.normalizeClass(["page-item",{disabled:t.preHandler.pagination.page>=e.unref(l)}])},[t.preHandler.pagination.page<e.unref(l)?(e.openBlock(),e.createElementBlock("a",{key:0,class:"page-link",href:"javascript:;",onClick:n[1]||(n[1]=d=>f(parseInt(t.preHandler.pagination.page)+1))}," Next ")):(e.openBlock(),e.createElementBlock("a",$,"Next"))],2)):e.createCommentVNode("",!0)])])],2)):e.createCommentVNode("",!0)}},z=["innerHTML"],V=["innerHTML"],F={__name:"AutoTableHeader",props:{tableData:Object,preHandler:Object,searchData:Array},setup(t){const a=t,o=e.ref(!1);e.watch(o,(l,r)=>{a.searchData.forEach(n=>{n.select=l})});const c=()=>{var l="";a.preHandler.sorting.t===1?l=a.preHandler.sorting.r?'a["'+a.preHandler.sorting.n+'"].localeCompare(b["'+a.preHandler.sorting.n+'"])':'b["'+a.preHandler.sorting.n+'"].localeCompare(a["'+a.preHandler.sorting.n+'"])':a.preHandler.sorting.t===2&&(l=a.preHandler.sorting.r?'a["'+a.preHandler.sorting.n+'"] - b["'+a.preHandler.sorting.n+'"]':'b["'+a.preHandler.sorting.n+'"] - a["'+a.preHandler.sorting.n+'"]');let r="return "+l;return new Function("a,b",r)},m=l=>a.preHandler.sorting.n===l?a.preHandler.sorting.r?"&#8650;":"&#8648;":"&#8645;",f=l=>l&&l.caseColon?l.caseColon(l):!0,g=l=>{if(l.sort){a.preHandler.sorting.r=a.preHandler.sorting.n===l.sort.n&&!a.preHandler.sorting.r,a.preHandler.sorting.n=l.sort.n,a.preHandler.sorting.t=l.sort.t;const r=c();a.searchData.sort(r)}};return(l,r)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.tableData.line?t.tableData.line.tag:"tr"),{class:e.normalizeClass(t.tableData.line.class)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.tableData.data,n=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:n.name},[f(n)?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.tag?n.tag:"th"),{key:0,class:e.normalizeClass(n.tclass?n.tclass:""),style:e.normalizeStyle(n.style),onClick:d=>g(n)},{default:e.withCtx(()=>[n.checkbox?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,type:"checkbox",class:e.normalizeClass(n.class),"onUpdate:modelValue":r[0]||(r[0]=d=>o.value=d)},null,2)),[[e.vModelCheckbox,o.value]]):(e.openBlock(),e.createElementBlock("span",{key:1,class:e.normalizeClass(n.class),innerHTML:n.title},null,10,z)),n.sort?(e.openBlock(),e.createElementBlock("span",{key:2,innerHTML:m(n.sort.n)},null,8,V)):e.createCommentVNode("",!0)]),_:2},1032,["class","style","onClick"])):e.createCommentVNode("",!0)],64))),128))]),_:1},8,["class"]))}},T={__name:"RowTable",props:{tableData:Object,rowData:Object,filedData:Object},setup(t){const a=t,o=()=>a.filedData.caseColon?a.filedData.caseColon(a.rowData,a.filedData):!0;return(c,m)=>o()?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.filedData.tag?t.filedData.tag:"td"),{key:0,class:e.normalizeClass(t.filedData.class)},{default:e.withCtx(()=>[t.filedData.list?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(t.filedData.list,(f,g)=>(e.openBlock(),e.createBlock(h,{key:g+"-body",filedData:f,rowData:t.rowData},null,8,["filedData","rowData"]))),128)):e.createCommentVNode("",!0)]),_:1},8,["class"])):e.createCommentVNode("",!0)}},L={__name:"AutoTableBody",props:{tableData:Object,preHandler:Object,searchData:Array},setup(t){return(a,o)=>(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.searchData,c=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.tableData.line.tag?t.tableData.line.tag:"tr"),{key:c,class:e.normalizeClass(t.tableData.line.class)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.tableData.data,m=>(e.openBlock(),e.createBlock(T,{key:m,rowData:c,filedData:m,tableData:t.tableData},null,8,["rowData","filedData","tableData"]))),128)),c.open?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.tableData.line.tag?t.tableData.line.tag:"tr"),{key:0,class:e.normalizeClass(t.tableData.line.class)},{default:e.withCtx(()=>[t.tableData.line.tag==="tr"||!t.tableData.line.tag?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(a.filedData.tag?a.filedData.tag:"td"),{key:0},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(c.component),{pageData:c},null,8,["pageData"]))]),_:2},1024)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(a.filedData.tag?a.filedData.tag:"td"),{key:1},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(c.component),{pageData:c},null,8,["pageData"]))]),_:2},1024))]),_:2},1032,["class"])):e.createCommentVNode("",!0)]),_:2},1032,["class"]))),128))}},M={__name:"SectionBody",props:{column:Object,preHandler:Object,searchData:Array,runSearch:Function},setup(t){const a=t,o=()=>Object.prototype.hasOwnProperty.call(a.column,"class")?typeof a.column.class=="function"?a.column.class(a.rowData):a.column.class:"";return(c,m)=>t.column.type==="comp"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.column.tag?t.column.tag:"div"),{key:0,class:e.normalizeClass(o())},{default:e.withCtx(()=>[t.column.name==="tableHead"?(e.openBlock(),e.createBlock(F,{key:0,tableData:t.column,searchData:t.searchData,preHandler:t.preHandler},null,8,["tableData","searchData","preHandler"])):t.column.name==="tableBody"?(e.openBlock(),e.createBlock(L,{key:1,tableData:t.column,searchData:t.searchData,preHandler:t.preHandler},null,8,["tableData","searchData","preHandler"])):t.column.name==="pagination"?(e.openBlock(),e.createBlock(x,{key:2,searchData:t.searchData,preHandler:t.preHandler},null,8,["searchData","preHandler"])):t.column.name==="autosearch"?(e.openBlock(),e.createBlock(u,{key:3,autoSearch:t.column.data,runSearch:t.runSearch,preHandler:t.preHandler},null,8,["autoSearch","runSearch","preHandler"])):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.column.name),{key:4,compData:t.column.data},null,8,["compData"])),t.column.list?(e.openBlock(),e.createBlock(B,{key:5,columns:t.column.list,searchData:t.searchData,preHandler:t.preHandler,runSearch:t.runSearch},null,8,["columns","searchData","preHandler","runSearch"])):e.createCommentVNode("",!0)]),_:1},8,["class"])):(e.openBlock(),e.createBlock(h,{key:1,filedData:t.column,rowData:{}},{default:e.withCtx(()=>[t.column.list?(e.openBlock(),e.createBlock(B,{key:0,columns:t.column.list,searchData:t.searchData,preHandler:t.preHandler,runSearch:t.runSearch},null,8,["columns","searchData","preHandler","runSearch"])):e.createCommentVNode("",!0)]),_:1},8,["filedData"]))}},B={__name:"Section",props:{columns:Array,preHandler:Object,searchData:Array,runSearch:Function},setup(t){const a=o=>typeof o.caseColon=="function"?o.caseColon():!0;return(o,c)=>(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.columns,m=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:m},[a(m)?(e.openBlock(),e.createBlock(M,{key:0,column:m,preHandler:t.preHandler,searchData:t.searchData,runSearch:t.runSearch},null,8,["column","preHandler","searchData","runSearch"])):e.createCommentVNode("",!0)],64))),128))}},A={key:1,class:"loader"},P={__name:"index",props:{pageSetting:Object,allData:{type:Array,default:[]}},setup(t){const a=t,o=e.reactive([]),c=e.reactive([]),m=l=>l.replace(/Ğ/g,"\u011F").replace(/Ü/g,"\xFC").replace(/Ş/g,"\u015F").replace(/I/g,"\u0131").replace(/İ/g,"i").replace(/Ö/g,"\xF6").replace(/Ç/g,"\xE7").toLowerCase();e.watch(a.allData,()=>{f()}),e.watch(a.pageSetting.preHandler.pagination,()=>{a.pageSetting.preHandler.dynamic||f()});const f=()=>{let l=a.pageSetting.preHandler.autoSearch&&a.pageSetting.preHandler.autoSearch.value.length>0?a.allData.filter(r=>{let n=[];return a.pageSetting.preHandler.autoSearch.alans.forEach(D=>{n.push(m(r[D].toString()))}),n.join(" ").indexOf(m(a.pageSetting.preHandler.autoSearch.value))!==-1}):a.allData;o.splice(0,o.length),o.push(...l),g()},g=()=>{if(c.splice(0,c.length),a.pageSetting.preHandler.dynamic)c.push(...o);else{const l=o.length,r=a.pageSetting.preHandler.pagination;r.total=l;const n=Math.ceil(l/r.pageSize);r.page>n&&n>0&&(r.page=n);const d=(r.page-1)*r.pageSize;c.push(...o.slice(d,d+r.pageSize))}};return e.onMounted(()=>{f()}),(l,r)=>t.pageSetting.loader?(e.openBlock(),e.createElementBlock("div",A,"Loader...")):(e.openBlock(),e.createBlock(B,{key:0,columns:t.pageSetting.pageData,preHandler:t.pageSetting.preHandler,searchData:c,runSearch:f},null,8,["columns","preHandler","searchData"]))}};class q{constructor(){this.preHandler={dynamic:!1,loader:!1,pagination:{status:!0,page:1,pageSize:20,total:0},autoSearch:{value:"",alans:[]},sorting:{n:"",t:1,r:!1},tableCahngePage:()=>{},tableSorting:()=>{}},this.pageData=[]}}p.AutoPage=P,p.createPageSetting=q,Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
